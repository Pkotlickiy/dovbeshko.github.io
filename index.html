<?php
include 'db.php';
?>

<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Профессиональная юридическая помощь от опытного адвоката. Защита ваших прав и интересов.">
    <meta property="og:title" content="Адвокат Довбешко Светлана Юрьевна">
    <meta property="og:description" content="Профессиональная юридическая помощь от опытного адвоката. Защита ваших прав и интересов.">
    <meta property="og:image" content="lawyer-profile.jpg">
    <title>Адвокат Довбешко Светлана Юрьевна</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Мобильное меню -->
    <div class="mobile-menu">
        <i class="fas fa-bars"></i>
    </div>

    <!-- Шапка сайта -->
    <header>
        <div class="container">
            <div class="logo">
                <h1>Адвокат Довбешко Светлана Юрьевна</h1>
            </div>
            <nav class="desktop-nav">
                <ul>
                    <li><a href="#home">Главная</a></li>
                    <li><a href="#about">Обо мне</a></li>
                    <li>
                        <a href="#services">Услуги</a>
                        <ul class="dropdown">
                            <li><a href="#family-law">Семейное право</a></li>
                            <li><a href="#civil-law">Гражданское право</a></li>
                            <li><a href="#criminal-law">Уголовное право</a></li>
                            <li><a href="#business-law">Бизнес-право</a></li>
                        </ul>
                    </li>
                    <li><a href="#contact">Контакты</a></li>
                </ul>
            </nav>
            <nav class="mobile-nav">
                <ul>
                    <li><a href="#home">Главная</a></li>
                    <li><a href="#about">Обо мне</a></li>
                    <li><a href="#services">Услуги</a></li>
                    <li><a href="#contact">Контакты</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main>
        <!-- Главная страница -->
        <section id="home" class="hero">
            <div class="container grid">
                <div class="hero-content">
                    <h2>Профессиональная юридическая помощь</h2>
                    <p>Защита ваших прав и интересов — мой приоритет.</p>
                    <a href="#consultation" class="btn">Получить консультацию</a>
                </div>
                <div class="hero-image">
                    <img src="lawyer.svg" alt="Юрист" loading="lazy">
                </div>
            </div>
        </section>

        <!-- Счетчик успехов -->
        <section id="success-counter" class="success-counter">
            <div class="container grid">
                <div class="counter-item">
                    <span class="number">500+</span>
                    <p>Успешных дел</p>
                </div>
                <div class="counter-item">
                    <span class="number">10+</span>
                    <p>Лет опыта</p>
                </div>
                <div class="counter-item">
                    <span class="number">95%</span>
                    <p>Довольных клиентов</p>
                </div>
            </div>
        </section>

        <!-- Почему выбирают нас -->
        <section id="why-us" class="why-us">
            <div class="container">
                <h2>Почему выбирают нас?</h2>
                <div class="features grid">
                    <div class="feature card">
                        <i class="fas fa-balance-scale"></i>
                        <h3>Профессионализм</h3>
                        <p>Более 10 лет успешной практики в различных областях права.</p>
                    </div>
                    <div class="feature card">
                        <i class="fas fa-shield-alt"></i>
                        <h3>Защита интересов</h3>
                        <p>Мы защищаем ваши права в любой ситуации, будь то суд или переговоры.</p>
                    </div>
                    <div class="feature card">
                        <i class="fas fa-handshake"></i>
                        <h3>Индивидуальный подход</h3>
                        <p>Каждый клиент получает персональное внимание и стратегию решения проблемы.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Обо мне -->
        <section id="about" class="about">
            <div class="container">
                <h2>Обо мне</h2>
                <div class="about-content grid">
                    <?php
                    $result = $conn->query("SELECT * FROM about WHERE id = 1");
                    if ($result->num_rows > 0) {
                        $row = $result->fetch_assoc();
                    ?>
                    <div class="about-text card">
                        <p><?php echo htmlspecialchars($row['text']); ?></p>
                        <a href="#services" class="btn">Узнать больше</a>
                    </div>
                    <div class="about-image card">
                        <img src="<?php echo htmlspecialchars($row['image']); ?>" alt="Адвокат" loading="lazy">
                    </div>
                    <?php
                    } else {
                    ?>
                    <div class="about-text card">
                        <p>Информация о нас скоро будет добавлена.</p>
                    </div>
                    <?php
                    }
                    ?>
                </div>
            </div>
        </section>

        <!-- Сертификаты и награды -->
        <section id="certificates" class="certificates">
            <div class="container">
                <h2>Сертификаты и награды</h2>
                <div class="certificates-grid grid">
                    <?php
                    $result = $conn->query("SELECT * FROM certificates");
                    if ($result->num_rows > 0) {
                        while ($row = $result->fetch_assoc()) {
                    ?>
                    <div class="certificate-item card">
                        <img src="<?php echo htmlspecialchars($row['image']); ?>" alt="<?php echo htmlspecialchars($row['title']); ?>" loading="lazy">
                        <p><?php echo htmlspecialchars($row['description']); ?></p>
                    </div>
                    <?php
                        }
                    } else {
                    ?>
                    <div class="certificate-item card">
                        <p>Сертификаты и награды скоро будут добавлены.</p>
                    </div>
                    <?php
                    }
                    ?>
                </div>
            </div>
        </section>

        <!-- Услуги -->
        <section id="services" class="services">
            <div class="container">
                <h2>Мои услуги</h2>
                <div class="services-grid grid">
                    <?php
                    $result = $conn->query("SELECT * FROM services");
                    if ($result->num_rows > 0) {
                        while ($row = $result->fetch_assoc()) {
                    ?>
                    <div class="service-item card">
                        <i class="<?php echo htmlspecialchars($row['icon']); ?>"></i>
                        <h3><?php echo htmlspecialchars($row['title']); ?></h3>
                        <p><?php echo htmlspecialchars($row['description']); ?></p>
                    </div>
                    <?php
                        }
                    } else {
                    ?>
                    <div class="service-item card">
                        <p>Услуги скоро будут добавлены.</p>
                    </div>
                    <?php
                    }
                    ?>
                </div>
            </div>
        </section>

        <!-- Последние статьи -->
        <section id="blog" class="blog">
            <div class="container">
                <h2>Последние статьи</h2>
                <div class="blog-posts grid">
                    <?php
                    $args = array(
                        'post_type' => 'post',
                        'posts_per_page' => 2,
                    );
                    $query = new WP_Query($args);
                    if ($query->have_posts()) :
                        while ($query->have_posts()) : $query->the_post();
                    ?>
                    <article class="post card">
                        <?php if (has_post_thumbnail()) : ?>
                            <img src="<?php the_post_thumbnail_url('full'); ?>" alt="<?php the_title_attribute(); ?>" loading="lazy">
                        <?php endif; ?>
                        <h3><?php the_title(); ?></h3>
                        <p><?php the_excerpt(); ?></p>
                        <a href="<?php the_permalink(); ?>" class="btn">Читать далее</a>
                    </article>
                    <?php endwhile; ?>
                    <?php wp_reset_postdata(); ?>
                    <?php else : ?>
                        <p>Нет статей.</p>
                    <?php endif; ?>
                </div>
            </div>
        </section>

        <!-- Отзывы клиентов -->
        <section id="reviews" class="reviews">
            <div class="container">
                <h2>Отзывы клиентов</h2>
                <div class="review-slider grid">
                    <?php
                    $result = $conn->query("SELECT * FROM reviews");
                    $totalSlides = $result->num_rows;
                    $currentSlide = 0;
                    if ($totalSlides > 0) {
                        while ($row = $result->fetch_assoc()) {
                            $activeClass = ($currentSlide == 0) ? 'active' : '';
                    ?>
                    <div class="review-card card <?php echo $activeClass; ?>">
                        <img src="<?php echo htmlspecialchars($row['image']); ?>" alt="<?php echo htmlspecialchars($row['author']); ?>">
                        <p><?php echo htmlspecialchars($row['text']); ?></p>
                        <p><strong><?php echo htmlspecialchars($row['author']); ?></strong></p>
                    </div>
                    <?php
                            $currentSlide++;
                        }
                    } else {
                    ?>
                    <div class="review-card card active">
                        <p>Отзывы клиентов скоро будут добавлены.</p>
                    </div>
                    <?php
                    }
                    ?>
                </div>
                <button class="prev-btn"><i class="fas fa-chevron-left"></i></button>
                <button class="next-btn"><i class="fas fa-chevron-right"></i></button>
            </div>
        </section>

        <!-- Форма консультации -->
        <section id="consultation" class="consultation">
            <div class="container">
                <h2>Получите бесплатную консультацию</h2>
                <form action="/submit-consultation" method="post" class="consultation-form card">
                    <div class="input-group">
                        <i class="fas fa-user"></i>
                        <input type="text" id="name" name="name" placeholder="Ваше имя" required>
                    </div>
                    <div class="input-group">
                        <i class="fas fa-phone"></i>
                        <input type="tel" id="phone" name="phone" placeholder="Телефон" pattern="+7 ([0-9]{3}) [0-9]{3}-[0-9]{2}-[0-9]{2}" required>
                    </div>
                    <div class="input-group">
                        <i class="fas fa-envelope"></i>
                        <textarea id="message" name="message" placeholder="Ваш вопрос" required></textarea>
                    </div>
                    <button type="submit" class="btn">Отправить</button>
                </form>
            </div>
        </section>

        <!-- Социальные сети -->
        <section id="social-media" class="social-media">
            <div class="container">
                <h2>Свяжитесь со мной в социальных сетях</h2>
                <div class="social-icons">
                    <a href="https://vk.com" target="_blank"><i class="fab fa-vk"></i></a>
                    <a href="https://facebook.com" target="_blank"><i class="fab fa-facebook-f"></i></a>
                    <a href="https://instagram.com" target="_blank"><i class="fab fa-instagram"></i></a>
                    <a href="https://linkedin.com" target="_blank"><i class="fab fa-linkedin-in"></i></a>
                </div>
            </div>
        </section>

        <!-- Контакты -->
        <section id="contact" class="contact">
            <div class="container">
                <h2>Свяжитесь со мной</h2>
                <div class="contact-info grid">
                    <?php
                    $result = $conn->query("SELECT * FROM contact WHERE id = 1");
                    if ($result->num_rows > 0) {
                        $row = $result->fetch_assoc();
                    ?>
                    <div class="info-item card">
                        <i class="fas fa-phone"></i>
                        <p><?php echo htmlspecialchars($row['phone']); ?></p>
                    </div>
                    <div class="info-item card">
                        <i class="fas fa-envelope"></i>
                        <p><?php echo htmlspecialchars($row['email']); ?></p>
                    </div>
                    <div class="info-item card">
                        <i class="fas fa-map-marker-alt"></i>
                        <p><?php echo htmlspecialchars($row['address']); ?></p>
                    </div>
                    <?php
                    } else {
                    ?>
                    <div class="info-item card">
                        <p>Контактная информация скоро будет добавлена.</p>
                    </div>
                    <?php
                    }
                    ?>
                </div>
                <div class="map card">
                    <iframe src="https://yandex.ru/map-widget/v1/?um=constructor%3A9a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6q7r8s9t0u1v2w3x4y5z6&source=constructor" width="100%" height="400" frameborder="0"></iframe>
                </div>
            </div>
        </section>
    </main>

    <!-- Подвал -->
    <footer>
        <div class="container">
            <p>&copy; <?php echo date('Y'); ?> Адвокат Довбешко Светлана Юрьевна. Все права защищены.</p>
        </div>
    </footer>

    <script src="https://api-maps.yandex.ru/2.1/?apikey=YOUR_YANDEX_MAPS_API_KEY&lang=ru_RU" type="text/javascript"></script>
    <script src="script.js"></script>
</body>
</html>